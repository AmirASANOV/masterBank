"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5905,5728],{5905:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});n(752),n(60228),n(73964),n(21694),n(76265),n(76801),n(43843),n(64043),n(38077),n(34338),n(50886);var r=n(67294),a=n(50533),i=n(22290),o=n(22283),l=n(98752),s=n(24645),u=n(8975),c=n(32175),f=n(92576),d=n(47183),m=n(72445),p=n(68322),y=n(60731),v=n(94057),h=n(69640);n(57267),n(61514);const _=function(){return(0,r.useEffect)((function(){window.location.replace("https://microzaim.org".concat(window.location.search))}),[]),null};var g=n(4771),E=r.lazy((function(){return Promise.all([n.e(1227),n.e(1341),n.e(3925)]).then(n.bind(n,96483))})),b=r.lazy((function(){return Promise.all([n.e(1227),n.e(251)]).then(n.bind(n,71022))})),S=r.lazy((function(){return Promise.all([n.e(1227),n.e(1341),n.e(1987)]).then(n.bind(n,93593))})),w=r.lazy((function(){return Promise.all([n.e(1227),n.e(3465)]).then(n.bind(n,24760))}));const A=function(){var e=(0,g.j)(),t=(0,a.I0)(),n=(0,y.T)(),A=(0,p.C)((function(e){return e.config.viewport})),I=window.location.pathname.includes("myApplications"),k=(0,p.C)((function(e){return e.feedback.change_anketa_message})),O=(0,p.C)((function(e){var t;return null===(t=e.validator.credit_parameters_info.credit_target.result.value)||void 0===t?void 0:t.value}));return(0,r.useEffect)((function(){t((0,v.Z6)({loaderStatus:!!e.data.response_status&&"success"!==e.data.response_status,message:"Загружаем решения по вашей заявке...",type:"future"}))}),[e.data.response_status]),r.createElement(r.Fragment,null,!e.data.finished&&/change_anketa/.test(n.location.pathname)&&k?r.createElement(u.Z,null,r.createElement(c.Z,null,r.createElement(f.N,{title:"Дождитесь завершения рассмотрения текущей заявки",suggestionContent:[k],titleStyle:{marginBottom:16},titleTextAlign:{desktop:"left",tablet:"left",mobile:"left"}}))):"","success"===e.data.response_status?r.createElement(r.Fragment,null,"CASH"===e.data.decision_type?r.createElement(r.Fragment,null,e.data.credit_cash_response&&e.data.credit_cash_response.filter((function(e){return"APPROVED"===e.status})).length>0&&e.data.finished?r.createElement(m.g,{fallBack:r.createElement(d.default,{message:"Получаем итоговые ответы от партнеров...",type:"future"})},r.createElement(b,{credit_card_list:e.data.credit_card_response,inProfile:I,decision_list:e.data.credit_cash_response,viewport:A,status:"finish",product:O})):r.createElement(m.g,{fallBack:r.createElement(d.default,{message:"Получаем список партнеров, предварительно одобривших заявку...",type:"future"})},r.createElement(b,{credit_card_list:e.data.credit_card_response,inProfile:I,decision_list:e.data.credit_cash_response,viewport:A,status:"process",product:O}))):"CARD"===e.data.decision_type||"INSTALLMENT_CARD"===e.data.decision_type?r.createElement(m.g,{fallBack:r.createElement(d.default,{message:"Получаем ответы от партнеров...",type:"future"})},r.createElement(E,{decision_type:e.data.decision_type,decision_list:e.data.credit_card_response,installment_card_list:e.data.installment_card_response,mfo_response:e.data.mfo_response,finished:e.data.finished,inProfile:I,viewport:A,status:"finish"})):"MFO"===e.data.decision_type||"WAIT_MFO"===e.data.decision_type?r.createElement(r.Fragment,null,"WAIT_MFO"===e.data.decision_type?r.createElement(m.g,{fallBack:r.createElement(d.default,{message:"Получаем одобрение с дополнительными условиями...",type:"future"})},r.createElement(S,{sendMFO:e.sendMFO,inProfile:I,decision_list:e.data.mfo_response,viewport:A,status:"wait"})):e.data.mfo_response&&e.data.finished?r.createElement(m.g,{fallBack:r.createElement(d.default,{message:"Получаем итоги заявки с дополнительными условиями...",type:"future"})},r.createElement(S,{sendMFO:e.sendMFO,inProfile:I,decision_list:e.data.mfo_response,viewport:A,status:"finish"})):r.createElement(m.g,{fallBack:r.createElement(d.default,{message:"Отправляем запрос партнерам...",type:"future"})},r.createElement(S,{sendMFO:e.sendMFO,inProfile:I,decision_list:e.data.mfo_response,viewport:A,status:"process",timer:e.timer}))):"DEPOSIT"===e.data.decision_type||"WAIT_DEPOSIT"===e.data.decision_type?r.createElement(m.g,{fallBack:r.createElement(d.default,{message:"Загрузка залоговых продуктов...",type:"future"})},r.createElement(w,{decision_list:(e.data.deposit_car_response||[]).concat(e.data.deposit_estate_response||[]),status:"WAIT_DEPOSIT"===e.data.decision_type?"wait":"finish",inProfile:I,viewport:A,sendDeposit:e.sendDeposit,sendMFO:e.sendMFO,decision_type:e.data.decision_type})):"ALL_REJECTED"===e.data.decision_type?r.createElement(_,null):null===e.data.decision_type?r.createElement(u.Z,null,r.createElement(c.Z,null,r.createElement(f.N,{title:"Произошла ошибка.",titleStyle:{marginBottom:16},suggestionContainerStyle:{background:"transparent"},suggestionContent:["При загрузке результатов рассмотрения вашей заявки произошла ошибка.;;Пожалуйста перезагрузите страницу или попробуйте зайти позже."]}))):""):"error"===e.data.response_status?r.createElement(u.Z,null,r.createElement(c.Z,null,r.createElement(f.N,{title:"Произошла ошибка.",titleStyle:{marginBottom:16},suggestionContainerStyle:{background:"transparent"},suggestionContent:["При загрузке результатов рассмотрения вашей заявки произошла ошибка.;;Пожалуйста перезагрузите страницу или попробуйте зайти позже."]}))):"empty"===e.data.response_status?r.createElement(u.Z,null,r.createElement(c.Z,{style:{overflow:"hidden"}},r.createElement(f.N,{titleClassName:"header-30 mb-16",title:"У вас еще нет отправленных заявок",suggestionContainerStyle:{background:"transparent"},suggestionContent:["Чтобы сформировать заявку выберите кредитный продукт ниже:"]}),r.createElement(s.r,{container:!0,direction:"row",justify:"space-around",align:"stretch",alignSpace:"mobile"!==A?20:10,space:20},i.Hx.map((function(e,a){return r.createElement(s.P,{colDesktop:4,colTablet:4,colMobile:12,key:"product_".concat(a+1)},r.createElement(l.Z,{type:"mobile"!==A?"mainBold":"smallMainBold",text:"Оформить ".concat((0,o.wx)(e.value,"title_parental_case")),onClick:function(){t(h.JP.updateCreditProduct({value:i.Hx.filter((function(t){return t.value===e.value}))[0],touched:!0})),n.push("/user/credit/".concat(e.value,"/"))},key:"form_re_send_".concat(a+1,"_btn")}))}))))):"")}},4771:(e,t,n)=>{n.d(t,{j:()=>g});n(38077),n(60228),n(89730),n(76801),n(43843),n(34284),n(96869),n(63975),n(59749),n(86544),n(84254),n(752),n(21694),n(76265),n(30024),n(12826),n(77049),n(64043);var r=n(67294),a=n(52322),i=n(68322),o=n(60731);n(25728),n(97195),n(62506),n(49693),n(47522);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const u=function(){var e=l((0,r.useState)([]),2),t=e[0],n=e[1],a=function(e){n((function(t){if(t.filter((function(t){return t.key===e.key})).length>0)return t;var n=t.slice();return n.push(e),n}))},i={getTimeouts:t,setInterval:function(e){function t(t,n,r,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n,r){r&&t();var i=setInterval((function(){t()}),1e3*n||3e4),o={key:"".concat(e,"interval"),useNow:r,timeout:n,intervalID:i};a(o)})),deleteInterval:function(e){!function(e){n((function(t){var n=t.slice(),r=n.find((function(t){return t.key===e}));if(r){var a=n.indexOf(r);return r.intervalID&&(clearTimeout(r.intervalID),clearInterval(r.intervalID)),n.splice(a,1),n}return t}))}("".concat(e,"interval"))},setTimeout:function(e){function t(t,n,r,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n,r){r&&t();var i=setTimeout((function(){t()}),1e3*n||3e4),o={key:"".concat(e,"timeout"),useNow:r,timeout:n,intervalID:i};a(o)})),clearAll:function(){t.forEach((function(e){e.intervalID&&(clearInterval(e.intervalID),clearTimeout(e.intervalID))}));for(var e=setInterval("");e>=0;e--)clearInterval(e);for(var n=setTimeout("");n>=0;n--)clearTimeout(n)}};return(0,r.useEffect)((function(){return function(){return i.clearAll()}}),[]),i};n(8472),n(42227),n(97389);var c=n(50533);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=n(96546),p=n(32827),y=n(36574),v=n(94057);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e){var t=(0,o.T)(),n=(0,a.Z)(),l=(0,i.C)((function(e){return e.anketaResponse})),s=(0,i.C)((function(e){return e.config.zaimer.isShow})),d=u(),_="getDecisionStatus",g=h((0,r.useState)([]),2),E=g[0],b=g[1],S=function(){var e=f((0,r.useState)({seconds:"00",minute:"00"}),2),t=e[0],n=e[1],a=f((0,r.useState)(!1),2),i=a[0],o=a[1],l=f((0,r.useState)(0),2),s=l[0],u=l[1],d=(0,r.useRef)();return(0,r.useEffect)((function(){return i&&(d.current=setInterval((function(){var e=Math.floor(s%60),t=Math.floor(s/60);(0,c.dC)((function(){n({seconds:String(e).padStart(2,"0"),minute:String(t).padStart(2,"0")}),u((function(e){return e+1}))}))}),1e3)),function(){return clearInterval(d.current)}}),[i,s]),{timer:t,isActive:i,stopTimer:function(){(0,c.dC)((function(){o(!1),u(0),n({seconds:"00",minute:"00"})})),clearInterval(d.current)},runTimer:o,setDate:function(e){u(Math.abs(Math.round(Date.now()-Math.round(+e.toFixed()))/1e3))}}}(),w=S.timer,A=S.runTimer,I=S.stopTimer,k=S.isActive,O=S.setDate,T=function(){d.deleteInterval(_),n((0,y.dL)(p.I)),I()},C=function(){e||n((0,y.FV)(d.clearAll))};return(0,r.useEffect)((function(){return T(),d.setInterval(_,C,15,!0),function(){return T()}}),[]),(0,r.useEffect)((function(){l.mfo_timestamp&&"MFO"===l.decision_type&&(k||(O(l.mfo_timestamp),A(!0)))}),[l.mfo_timestamp,l.decision_type,l]),(0,r.useEffect)((function(){l.finished&&(d.clearAll(),I())}),[l.finished,l]),(0,r.useEffect)((function(){E.filter((function(e){return"error"===e})).length>=5&&(d.clearAll(),I(),n((0,v.wN)(["Нам не удалось загрузить результаты последней заявки на кредит, пожалуйста, попробуйте посетить этот раздел позже."],20,"")),b([]))}),[E]),(0,r.useEffect)((function(){b((function(e){var t=e.slice();return t.push(l.response_status||""),t}))}),[l.response_status]),(0,r.useEffect)((function(){if(t.location.pathname.includes("user")&&l.mfo_response){var e=l.mfo_response.filter((function(e){return"Zaimer"===e.name&&"APPROVED"===e.status}));if(e.length>0&&e[0].login_link&&!s&&l.finished&&"sop"!==m.Gh){var r=e[0].login_link;setTimeout((function(){n((0,v.dI)({link:r,isShow:!0})),t.push("/zaimerapprove")}),1e3)}}}),[l.mfo_response,l.finished,t.location.pathname]),{timer:w,redirect:function(e){return t.push(e)},finished:l.finished,status:l.response_status,data:l,sendMFO:function(){n((0,y.$j)())},sendDeposit:function(){n((0,y.e9)())}}}},35947:(e,t,n)=>{var r=n(30071);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},77254:(e,t,n)=>{var r=n(68844),a=n(43126),i=n(34327),o=n(90534),l=n(74684),s=r(o),u=r("".slice),c=Math.ceil,f=function(e){return function(t,n,r){var o,f,d=i(l(t)),m=a(n),p=d.length,y=void 0===r?" ":i(r);return m<=p||""===y?d:((f=s(y,c((o=m-p)/y.length))).length>o&&(f=u(f,0,o)),e?d+f:f+d)}};e.exports={start:f(!1),end:f(!0)}},25728:(e,t,n)=>{var r=n(79989),a=n(2960).find,i=n(87370),o="find",l=!0;o in[]&&Array(1)[o]((function(){l=!1})),r({target:"Array",proto:!0,forced:l},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i(o)},8472:(e,t,n)=>{var r=n(79989),a=n(77254).start;r({target:"String",proto:!0,forced:n(35947)},{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);